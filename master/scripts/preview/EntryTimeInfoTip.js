/* See license.txt for terms of usage */


define(["../domplate/domplate","../core/lib","i18n!../nls/requestList","./harModel"],function(e,t,a,s){var i=e.domplate,r=e.DIV,n=e.FOR,l=e.SPAN,m=e.TABLE,o=e.TBODY,p=e.TD,g=e.TR,T=i({tableTag:m({class:"timeInfoTip"},o()),timingsTag:n("time","$timings",g({class:"timeInfoTipRow",$collapsed:"$time|hideBar"},p({class:"$time|getBarClass timeInfoTipBar",$loaded:"$time.loaded",$fromCache:"$time.fromCache"}),p({class:"timeInfoTipCell startTime"},"$time.start|formatStartTime"),p({class:"timeInfoTipCell elapsedTime"},"$time.elapsed|formatTime"),p("$time|getLabel"))),startTimeTag:g(p(),p("$startTime.time|formatStartTime"),p({class:"timeInfoTipStartLabel",colspan:2},"$startTime|getLabel")),separatorTag:g({},p({class:"timeInfoTipSeparator",colspan:4,height:"10px"},l("$label"))),eventsTag:n("event","$events",g({class:"timeInfoTipEventRow"},p({class:"timeInfoTipBar",align:"center"},r({class:"$event|getPageTimingClass timeInfoTipEventBar"})),p("$event.start|formatStartTime"),p({colspan:2},"$event|getTimingLabel"))),hideBar:function(e){return!e.elapsed&&"request.phase.Blocking"===e.bar},getBarClass:function(e){return"net"+e.bar.substr(e.bar.lastIndexOf(".")+1)+"Bar"},getPageTimingClass:function(e){return e.classes?e.classes:""},formatTime:function(e){return t.formatTime(e.toFixed(2))},formatStartTime:function(e){var a=e>0,s=t.formatTime(Math.abs(e.toFixed(2)));return e?(a>0?"+":"-")+s:s},getLabel:function(e){return a[e.bar]},getTimingLabel:function(e){return e.bar},render:function(e,i,r){var n=e.input,l=i.repObject,m=s.getParentPage(n,l),o=m?t.parseISO8601(m.startedDateTime):null,p=t.parseISO8601(l.startedDateTime),g=T.tableTag.replace({},r),c={};c.time=o?p-o:p-i.phase.startTime,c.bar="request.Started",this.startTimeTag.insertRows({startTime:c},g.firstChild),this.separatorTag.insertRows({label:a["request.phases.label"]},g.firstChild);var d=0,u=[],f=l.timings.blocked,h=l.timings.dns,b=(l.timings.ssl,l.timings.connect),v=l.timings.send,$=l.timings.wait,C=l.timings.receive;if(f>=0&&u.push({bar:"request.phase.Blocking",elapsed:f,start:d}),h>=0&&u.push({bar:"request.phase.Resolving",elapsed:h,start:d+=f<0?0:f}),b>=0&&u.push({bar:"request.phase.Connecting",elapsed:b,start:d+=h<0?0:h}),v>=0&&u.push({bar:"request.phase.Sending",elapsed:v,start:d+=b<0?0:b}),$>=0&&u.push({bar:"request.phase.Waiting",elapsed:$,start:d+=v<0?0:v}),C>=0&&u.push({bar:"request.phase.Receiving",elapsed:C,start:d+=$<0?0:$,loaded:l.loaded,fromCache:s.isCachedEntry(l)}),this.timingsTag.insertRows({timings:u},g.firstChild),!m)return!0;for(var I=[],B=0;B<i.phase.pageTimings.length;B++){var q=i.phase.pageTimings[B];I.push({bar:q.description?q.description:q.name,start:o+q.time-p,classes:q.classes,time:q.time})}return I.length&&(I.sort(function(e,t){return e.time<t.time?-1:1}),this.separatorTag.insertRows({label:a["request.timings.label"]},g.firstChild),this.eventsTag.insertRows({events:I},g.firstChild)),!0}});return T});
//# sourceMappingURL=EntryTimeInfoTip.js.map