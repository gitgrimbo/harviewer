/* Downloadify 0.1 (c) 2009 by Douglas Neiner. Licensed under the MIT license */

/* See http://github.com/dcneiner/Downloadify for license and more info */


!function(){Downloadify=window.Downloadify={queue:{},uid:(new Date).getTime(),getTextForSave:function(n){return(n=Downloadify.queue[n])?n.getData():""},getFileNameForSave:function(n){return(n=Downloadify.queue[n])?n.getFilename():""},saveComplete:function(n){return(n=Downloadify.queue[n])&&n.complete(),!0},saveCancel:function(n){return(n=Downloadify.queue[n])&&n.cancel(),!0},saveError:function(n){return(n=Downloadify.queue[n])&&n.error(),!0},addToQueue:function(n){Downloadify.queue[n.queue_name]=n},getUID:function(n){return""==n.id&&(n.id="downloadify_"+Downloadify.uid++),n.id}},Downloadify.create=function(n,e){return n="string"==typeof n?document.getElementById(n):n,new Downloadify.Container(n,e)},Downloadify.Container=function(n,e){var o=this;o.el=n,o.enabled=!0,o.dataCallback=null,o.filenameCallback=null,o.data=null,o.filename=null,o.enable=function(){document.getElementById(o.flashContainer.id).setEnabled(!0),o.enabled=!0},o.disable=function(){document.getElementById(o.flashContainer.id).setEnabled(!1),o.enabled=!1},o.getData=function(){return o.enabled?o.dataCallback?o.dataCallback():o.data?o.data:"":""},o.getFilename=function(){return o.filenameCallback?o.filenameCallback():o.filename?o.filename:""},o.complete=function(){"function"==typeof o.options.onComplete&&o.options.onComplete()},o.cancel=function(){"function"==typeof o.options.onCancel&&o.options.onCancel()},o.error=function(){"function"==typeof o.options.onError&&o.options.onError()},function(){o.options=e,o.options.append||(o.el.innerHTML=""),o.flashContainer=document.createElement("span"),o.el.appendChild(o.flashContainer),o.queue_name=Downloadify.getUID(o.flashContainer),"function"==typeof o.options.filename?o.filenameCallback=o.options.filename:o.options.filename&&(o.filename=o.options.filename),"function"==typeof o.options.data?o.dataCallback=o.options.data:o.options.data&&(o.data=o.options.data);var n={queue_name:o.queue_name,width:o.options.width,height:o.options.height},a={allowScriptAccess:"always"},t={id:o.flashContainer.id,name:o.flashContainer.id};!1===o.options.enabled&&(o.enabled=!1),!0===o.options.transparent&&(a.wmode="transparent"),o.options.downloadImage&&(n.downloadImage=o.options.downloadImage),swfobject.embedSWF(o.options.swf,o.flashContainer.id,o.options.width,o.options.height,"10",null,n,a,t),Downloadify.addToQueue(o)}()},Downloadify.defaultOptions={swf:"media/downloadify.swf",downloadImage:"images/download.png",width:100,height:30,transparent:!0,append:!1}}(),"undefined"!=typeof jQuery&&function(n){n.fn.downloadify=function(e){return this.each(function(){e=n.extend({},Downloadify.defaultOptions,e);var o=Downloadify.create(this,e);n(this).data("Downloadify",o)})}}(jQuery);
//# sourceMappingURL=downloadify.min.js.map